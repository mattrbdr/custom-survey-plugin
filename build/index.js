(()=>{var e,t={247:()=>{"use strict";const e=window.React,t=window.wp.blocks,r=window.wp.i18n,n=window.wp.blockEditor,l=window.wp.components,o=window.wp.data;function i(e){const t=document.createElement("textarea");return t.innerHTML=e,t.value}(0,t.registerBlockType)("custom-survey-plugin/survey-block",{title:(0,r.__)("Survey Block","custom-survey-plugin"),icon:"chart-bar",category:"widgets",attributes:{surveyId:{type:"string",default:""},showResponses:{type:"boolean",default:!1},showQuestions:{type:"boolean",default:!1},showParticipants:{type:"boolean",default:!1},filterQuestion:{type:"string",default:""},showFilterQuestion:{type:"boolean",default:!1},filterParticipant:{type:"string",default:""},showFilterParticipant:{type:"boolean",default:!1},filterAttribute:{type:"string",default:""},showFilterAttribute:{type:"boolean",default:!1},reverseQuestions:{type:"boolean",default:!1},layout:{type:"string",default:"list"}},edit:({attributes:t,setAttributes:s})=>{const{surveyId:a,showResponses:u,showQuestions:c,showParticipants:h,filterQuestion:d,showFilterQuestion:p,filterParticipant:g,showFilterParticipant:v,filterAttribute:f,showFilterAttribute:y,reverseQuestions:m,layout:b}=t,{surveys:w,isLoading:_,questions:C,responses:E,participants:k,attributes:A}=(0,o.useSelect)((e=>{const t={per_page:-1,orderby:"date",order:"desc"},r=e("core").getEntityRecords("postType","survey",t);return{surveys:r,isLoading:!r,questions:a?e("core").getEntityRecords("postType","question",{...t,meta_key:"_survey_id",meta_value:a,orderby:m?"date":"none",order:m?"DESC":"ASC"}):[],responses:a?e("core").getEntityRecords("postType","response",{...t,meta_key:"_survey_id",meta_value:a}):[],participants:a?e("core").getEntityRecords("postType","participant",{...t,meta_key:"_survey_id",meta_value:a}):[],attributes:e("core").getEntityRecords("taxonomy","attribute",{parent:0})}}),[a]),S=w?w.map((e=>({label:i(e.title.rendered),value:e.id}))):[],x=[{label:(0,r.__)("List","custom-survey-plugin"),value:"list"},{label:(0,r.__)("Grid","custom-survey-plugin"),value:"grid"}],Q=C?C.filter((e=>e.title.rendered.toLowerCase().includes(d.toLowerCase()))):[],F=A?A.map((e=>({label:i(e.name),value:e.id}))):[];return(0,e.createElement)("div",{...(0,n.useBlockProps)()},(0,e.createElement)(n.InspectorControls,null,(0,e.createElement)(l.PanelBody,{title:(0,r.__)("Survey Settings","custom-survey-plugin")},_?(0,e.createElement)(l.Spinner,null):(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.SelectControl,{label:(0,r.__)("Select a Survey","custom-survey-plugin"),value:a,options:[{label:(0,r.__)("Select a Survey","custom-survey-plugin"),value:""},...S],onChange:e=>s({surveyId:e})}),a&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.ToggleControl,{label:(0,r.__)("Show Questions","custom-survey-plugin"),checked:c,onChange:e=>s({showQuestions:e})}),(0,e.createElement)(l.ToggleControl,{label:(0,r.__)("Show Responses","custom-survey-plugin"),checked:u,onChange:e=>s({showResponses:e})}),(0,e.createElement)(l.ToggleControl,{label:(0,r.__)("Show Party","custom-survey-plugin"),checked:h,onChange:e=>s({showParticipants:e})}),(0,e.createElement)(l.ToggleControl,{label:(0,r.__)("Show Filter Question","custom-survey-plugin"),checked:p,onChange:e=>s({showFilterQuestion:e})}),(0,e.createElement)(l.ToggleControl,{label:(0,r.__)("Show Filter Party","custom-survey-plugin"),checked:v,onChange:e=>s({showFilterParticipant:e})}),(0,e.createElement)(l.ToggleControl,{label:(0,r.__)("Show Filter Country","custom-survey-plugin"),checked:y,onChange:e=>s({showFilterAttribute:e})}),(0,e.createElement)(l.ToggleControl,{label:(0,r.__)("Reverse Questions Order","custom-survey-plugin"),checked:m,onChange:e=>s({reverseQuestions:e})}),(0,e.createElement)(l.TextControl,{label:(0,r.__)("Filter Questions","custom-survey-plugin"),value:d,onChange:e=>s({filterQuestion:e})}),(0,e.createElement)(l.SelectControl,{label:(0,r.__)("Layout","custom-survey-plugin"),value:b,options:x,onChange:e=>s({layout:e})}))))),(0,e.createElement)(l.Placeholder,{icon:"chart-bar",label:(0,r.__)("Survey Block Editor","custom-survey-plugin"),instructions:(0,r.__)("Select a survey from the settings.","custom-survey-plugin")},a&&(0,e.createElement)(e.Fragment,null,c&&Q&&(0,e.createElement)("div",null,(0,e.createElement)("h3",null,(0,r.__)("Questions:","custom-survey-plugin")),(0,e.createElement)("ul",null,Q.map((t=>(0,e.createElement)("li",{key:t.id},i(t.title.rendered)))))),u&&E&&(0,e.createElement)("div",null,(0,e.createElement)("h3",null,(0,r.__)("Responses:","custom-survey-plugin")),(0,e.createElement)("ul",null,E.map((t=>(0,e.createElement)("li",{key:t.id},i(t.title.rendered)))))),h&&k&&(0,e.createElement)("div",null,(0,e.createElement)("h3",null,(0,r.__)("Party:","custom-survey-plugin")),(0,e.createElement)("ul",null,k.map((t=>(0,e.createElement)("li",{key:t.id},i(t.title.rendered)))))),y&&(0,e.createElement)("div",null,(0,e.createElement)("h3",null,(0,r.__)("Filter Country:","custom-survey-plugin")),(0,e.createElement)(l.SelectControl,{value:f,options:[{label:(0,r.__)("Select a Country","custom-survey-plugin"),value:""},...F],onChange:e=>s({filterAttribute:e})})))))},save:({attributes:t})=>{const{surveyId:r,showQuestions:l,showResponses:o,showParticipants:i,filterQuestion:s,showFilterQuestion:a,filterParticipant:u,showFilterParticipant:c,filterAttribute:h,showFilterAttribute:d,reverseQuestions:p,layout:g}=t;return(0,e.createElement)("div",{...n.useBlockProps.save()},(0,e.createElement)("div",{className:`survey-block layout-${g}`,"data-survey-id":r,"data-show-questions":l,"data-show-responses":o,"data-show-participants":i,"data-show-filter-question":a,"data-filter-question":s,"data-show-filter-participant":c,"data-filter-participant":u,"data-show-filter-attribute":d,"data-filter-attribute":h,"data-reverse-questions":p}))}})},612:(e,t,r)=>{const n=r(192),l=r(975);e.exports={...n,entry:l.resolve("/","src/blocks/index.js"),output:{path:l.resolve("/","build"),filename:"index.js"},resolve:{fallback:{path:975}}}},975:e=>{"use strict";function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function r(e,t){for(var r,n="",l=0,o=-1,i=0,s=0;s<=e.length;++s){if(s<e.length)r=e.charCodeAt(s);else{if(47===r)break;r=47}if(47===r){if(o===s-1||1===i);else if(o!==s-1&&2===i){if(n.length<2||2!==l||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var a=n.lastIndexOf("/");if(a!==n.length-1){-1===a?(n="",l=0):l=(n=n.slice(0,a)).length-1-n.lastIndexOf("/"),o=s,i=0;continue}}else if(2===n.length||1===n.length){n="",l=0,o=s,i=0;continue}t&&(n.length>0?n+="/..":n="..",l=2)}else n.length>0?n+="/"+e.slice(o+1,s):n=e.slice(o+1,s),l=s-o-1;o=s,i=0}else 46===r&&-1!==i?++i:i=-1}return n}var n={resolve:function(){for(var e,n="",l=!1,o=arguments.length-1;o>=-1&&!l;o--){var i;o>=0?i=arguments[o]:(void 0===e&&(e=process.cwd()),i=e),t(i),0!==i.length&&(n=i+"/"+n,l=47===i.charCodeAt(0))}return n=r(n,!l),l?n.length>0?"/"+n:"/":n.length>0?n:"."},normalize:function(e){if(t(e),0===e.length)return".";var n=47===e.charCodeAt(0),l=47===e.charCodeAt(e.length-1);return 0!==(e=r(e,!n)).length||n||(e="."),e.length>0&&l&&(e+="/"),n?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,r=0;r<arguments.length;++r){var l=arguments[r];t(l),l.length>0&&(void 0===e?e=l:e+="/"+l)}return void 0===e?".":n.normalize(e)},relative:function(e,r){if(t(e),t(r),e===r)return"";if((e=n.resolve(e))===(r=n.resolve(r)))return"";for(var l=1;l<e.length&&47===e.charCodeAt(l);++l);for(var o=e.length,i=o-l,s=1;s<r.length&&47===r.charCodeAt(s);++s);for(var a=r.length-s,u=i<a?i:a,c=-1,h=0;h<=u;++h){if(h===u){if(a>u){if(47===r.charCodeAt(s+h))return r.slice(s+h+1);if(0===h)return r.slice(s+h)}else i>u&&(47===e.charCodeAt(l+h)?c=h:0===h&&(c=0));break}var d=e.charCodeAt(l+h);if(d!==r.charCodeAt(s+h))break;47===d&&(c=h)}var p="";for(h=l+c+1;h<=o;++h)h!==o&&47!==e.charCodeAt(h)||(0===p.length?p+="..":p+="/..");return p.length>0?p+r.slice(s+c):(s+=c,47===r.charCodeAt(s)&&++s,r.slice(s))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var r=e.charCodeAt(0),n=47===r,l=-1,o=!0,i=e.length-1;i>=1;--i)if(47===(r=e.charCodeAt(i))){if(!o){l=i;break}}else o=!1;return-1===l?n?"/":".":n&&1===l?"//":e.slice(0,l)},basename:function(e,r){if(void 0!==r&&"string"!=typeof r)throw new TypeError('"ext" argument must be a string');t(e);var n,l=0,o=-1,i=!0;if(void 0!==r&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var s=r.length-1,a=-1;for(n=e.length-1;n>=0;--n){var u=e.charCodeAt(n);if(47===u){if(!i){l=n+1;break}}else-1===a&&(i=!1,a=n+1),s>=0&&(u===r.charCodeAt(s)?-1==--s&&(o=n):(s=-1,o=a))}return l===o?o=a:-1===o&&(o=e.length),e.slice(l,o)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!i){l=n+1;break}}else-1===o&&(i=!1,o=n+1);return-1===o?"":e.slice(l,o)},extname:function(e){t(e);for(var r=-1,n=0,l=-1,o=!0,i=0,s=e.length-1;s>=0;--s){var a=e.charCodeAt(s);if(47!==a)-1===l&&(o=!1,l=s+1),46===a?-1===r?r=s:1!==i&&(i=1):-1!==r&&(i=-1);else if(!o){n=s+1;break}}return-1===r||-1===l||0===i||1===i&&r===l-1&&r===n+1?"":e.slice(r,l)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var r=t.dir||t.root,n=t.base||(t.name||"")+(t.ext||"");return r?r===t.root?r+n:r+"/"+n:n}(0,e)},parse:function(e){t(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return r;var n,l=e.charCodeAt(0),o=47===l;o?(r.root="/",n=1):n=0;for(var i=-1,s=0,a=-1,u=!0,c=e.length-1,h=0;c>=n;--c)if(47!==(l=e.charCodeAt(c)))-1===a&&(u=!1,a=c+1),46===l?-1===i?i=c:1!==h&&(h=1):-1!==i&&(h=-1);else if(!u){s=c+1;break}return-1===i||-1===a||0===h||1===h&&i===a-1&&i===s+1?-1!==a&&(r.base=r.name=0===s&&o?e.slice(1,a):e.slice(s,a)):(0===s&&o?(r.name=e.slice(1,i),r.base=e.slice(1,a)):(r.name=e.slice(s,i),r.base=e.slice(s,a)),r.ext=e.slice(i,a)),s>0?r.dir=e.slice(0,s-1):o&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};n.posix=n,e.exports=n},192:e=>{"use strict";e.exports=window.wp["scripts/config/webpack.config"]}},r={};function n(e){var l=r[e];if(void 0!==l)return l.exports;var o=r[e]={exports:{}};return t[e](o,o.exports,n),o.exports}n.m=t,e=[],n.O=(t,r,l,o)=>{if(!r){var i=1/0;for(c=0;c<e.length;c++){for(var[r,l,o]=e[c],s=!0,a=0;a<r.length;a++)(!1&o||i>=o)&&Object.keys(n.O).every((e=>n.O[e](r[a])))?r.splice(a--,1):(s=!1,o<i&&(i=o));if(s){e.splice(c--,1);var u=l();void 0!==u&&(t=u)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[r,l,o]},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={792:0,85:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var l,o,[i,s,a]=r,u=0;if(i.some((t=>0!==e[t]))){for(l in s)n.o(s,l)&&(n.m[l]=s[l]);if(a)var c=a(n)}for(t&&t(r);u<i.length;u++)o=i[u],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(c)},r=globalThis.webpackChunkcustom_survey_plugin_block=globalThis.webpackChunkcustom_survey_plugin_block||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),n.O(void 0,[85],(()=>n(247)));var l=n.O(void 0,[85],(()=>n(612)));l=n.O(l)})();